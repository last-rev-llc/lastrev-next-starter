# PreviewWrapper

This component serves as a wrapper to preview the content passed to it

## Parameters:

you must pass in all the fields of the content to render.

In addition, you must pass in the following field:

- `contentTypeId` [Required][string] - the content type ID of the content you wnat to render
- `componentLookup` [Required][function] - a function that will look up the component based on the content type.

## Setup

To use this component, it needs to live at a page. in your `pages` directory, create a file, generally `pages/preview.js`, and call the following, or something similar:

```javascript
/* eslint-disable no-console */
/* eslint-disable import/no-named-as-default */
/* eslint-disable import/no-named-as-default-member */
/* eslint-disable react/jsx-props-no-spreading */
import React, { useEffect, useState } from 'react';
import { useRouter } from 'next/router';
import { getFullContentById } from '@bit.dev/lastrev.adapters/contentful';
import PreviewWrapper from '@bit.dev/lastrev.adapters/contentful';
import Adapter from '@bit.dev/lastrev.adapters/contentful';
import loookupComponentByContentType from '@utils/lookupComponentByContentType';

// generated by build script
const urlMap = require('../../content-cache/urlmap.json');

const Preview = () => {
  const {
    query: { id, contentType }
  } = useRouter();

  if (!id || !contentType) return null;

  const transform = Adapter({ urlMap });

  const [fields, setFields] = useState();

  useEffect(async () => {
    const myContent = await getFullContentById(contentType, id);
    setFields(transform(myContent));
  });

  return fields ? <PreviewWrapper {...fields} componentLookup={loookupComponentByContentType} /> : null;
};

export default Preview;
```

## Attaching to the CMS

This component can be made to work with data from any CMS, as long as the data is adapted to the LastRev data shape using a suitable adapter.

Below are the instructions to attaching to Contentful:

In your Contentful space, go to _Settings_ > _Content Preview_ and click _Add Content Preview_. For each type you want to preview, select the checkbox and enter the URL of the deployed preview page, adding in the correct params, as shown below:

`https://develop.my-app.com/preview/?id={entry.sys.id}&contentType=pageGeneral`
